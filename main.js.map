{"version":3,"sources":["./projects/webrtc-lib/src/lib/enums/identity.enum.ts","./projects/webrtc-lib/src/lib/components/local-video/local-video.component.ts","./projects/webrtc-lib/src/lib/components/local-video/local-video.component.html","./projects/webrtc-lib/src/lib/ui-components/loading/loading.service.ts","./projects/nanshan-webrtc/src/main.ts","./projects/nanshan-webrtc/src/app/app.module.ts","./projects/webrtc-lib/src/lib/screenshot-preview/screenshot.service.ts","./projects/webrtc-lib/src/public-api.ts","./projects/nanshan-webrtc/src/app/app-routing.module.ts","./projects/webrtc-lib/src/lib/ui-components/loading/loader.interceptor.ts","./projects/webrtc-lib/src/lib/webrtc-lib.service.ts","./projects/nanshan-webrtc/src/app/shared/consts/routing-path.const.ts","./projects/nanshan-webrtc/src/environments/environment.ts","./projects/webrtc-lib/src/lib/ui-components/message/message.component.ts","./projects/webrtc-lib/src/lib/ui-components/message/message.component.html","./projects/webrtc-lib/src/lib/screenshot-preview/screenshot-preview.component.ts","./projects/webrtc-lib/src/lib/screenshot-preview/screenshot-preview.component.html","./projects/nanshan-webrtc/src/app/layout/layout.component.ts","./projects/nanshan-webrtc/src/app/layout/layout.component.html","./projects/webrtc-lib/src/lib/webrtc-lib.component.ts","./projects/webrtc-lib/src/lib/components/remote-video/remote-video.component.ts","./projects/webrtc-lib/src/lib/components/remote-video/remote-video.component.html","./projects/webrtc-lib/src/lib/webrtc-lib.module.ts","./projects/webrtc-lib/src/lib/ui-components/message/message.service.ts","./projects/webrtc-lib/src/lib/record/record.service.ts","./projects/webrtc-lib/src/lib/ui-components/loading/loading.component.html","./projects/webrtc-lib/src/lib/ui-components/loading/loading.component.ts","./projects/nanshan-webrtc/src/app/app.component.ts","./projects/nanshan-webrtc/src/app/app.component.html","./$_lazy_route_resource lazy namespace object"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["export enum Identity {\n    /** 業務員 */\n    Agent = 'agent',\n    /** 客戶 */\n    Customer = 'customer'\n}\n","import { AfterViewInit, Component, ElementRef, OnInit, ViewChild } from '@angular/core';\nimport { WebrtcLibService } from '../../webrtc-lib.service';\n\n@Component({\n  selector: 'lib-local-video',\n  templateUrl: './local-video.component.html',\n  styleUrls: ['./local-video.component.scss']\n})\nexport class LocalVideoComponent implements OnInit, AfterViewInit {\n\n  /* 本地端視訊 element */\n  @ViewChild('localVideo') private localVideo: ElementRef;\n\n  constructor(\n    private webrtcLibService: WebrtcLibService\n  ) { }\n\n  ngOnInit(): void {\n  }\n\n  ngAfterViewInit(): void {\n    this.webrtcLibService.localVideoEl = this.localVideo.nativeElement;\n  }\n\n}\n","<video #localVideo autoplay playsinline></video>","import { Injectable } from '@angular/core';\nimport { Subject, Observable } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class LoadingService {\n\n  private loadingSubject = new Subject<boolean>();\n\n  constructor() { }\n\n  getLoading(): Observable<boolean> {\n    return this.loadingSubject.asObservable();\n  }\n\n  loading(showLoading: boolean) {\n    this.loadingSubject.next(showLoading);\n  }\n}\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n","import { NgModule } from '@angular/core';\nimport { BrowserModule } from '@angular/platform-browser';\nimport { WebrtcLibModule } from 'projects/webrtc-lib/src/public-api';\n\nimport { AppRoutingModule } from './app-routing.module';\nimport { AppComponent } from './app.component';\nimport { LayoutComponent } from './layout/layout.component';\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    LayoutComponent\n  ],\n  imports: [\n    BrowserModule,\n    AppRoutingModule,\n    WebrtcLibModule\n  ],\n  providers: [],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","import { Injectable } from '@angular/core';\nimport { WebrtcLibService } from '../webrtc-lib.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ScreenshotService {\n\n  /* 本地/遠端視訊 element */\n  screenshotPreviewEl: HTMLImageElement;\n\n  constructor(\n    private webrtcLibService: WebrtcLibService\n  ) { }\n\n  getShotImage(): File {\n    // const isMobile = navigator.userAgentData.mobile; //resolves true/false\n    // const unitWidth = 4;\n    // const unitHeight = 3;\n    const canvas = document.createElement('canvas');\n    console.log(this.webrtcLibService.remoteVideoEl.videoWidth, this.webrtcLibService.remoteVideoEl.videoHeight);\n    canvas.width = this.webrtcLibService.remoteVideoEl.videoWidth * 1.2;\n    canvas.height = this.webrtcLibService.remoteVideoEl.videoHeight * 1.2;\n    const ctx = canvas.getContext('2d');\n\n    ctx?.drawImage(this.webrtcLibService.remoteVideoEl, 0, 0, canvas.width, canvas.height);\n\n    // convert to desired file format\n    const dataURI = canvas.toDataURL('image/jpg'); // can also use 'image/png'\n\n    // 檔名格式：YYYYMMDD_HH:mm:ss\n    const now = new Date();\n    const name = `screenshot_${now.getFullYear()}${now.getMonth() + 1}${now.getDate()}\n    _${now.getHours()}:${now.getMinutes()}:${now.getSeconds()}`;\n\n    const fileName = name + '.jpg';\n    const arr = dataURI.split(',');\n    const mime = arr[0].match(/:(.*?);/)!![1];\n    const bstr = atob(arr[1]);\n    let n = bstr.length;\n    const u8arr = new Uint8Array(n);\n\n    while (n--) {\n      u8arr[n] = bstr.charCodeAt(n);\n    }\n\n    const file = new File([u8arr], fileName, { type: mime });\n\n    // 顯示截圖的縮圖在左下角\n    this.screenshotPreviewEl.classList.add('show');\n    this.screenshotPreviewEl.src = canvas.toDataURL();\n    setTimeout(() => {\n      this.screenshotPreviewEl.classList.remove('show');\n    }, 3000);\n\n    return file;\n  }\n}\n","/*\n * Public API Surface of webrtc-lib\n */\n\nexport * from './lib/webrtc-lib.service';\nexport * from './lib/webrtc-lib.component';\nexport * from './lib/webrtc-lib.module';\n\n/** 本地端視訊 */\nexport * from './lib/components/local-video/local-video.component';\n/** 遠端視訊 */\nexport * from './lib/components/remote-video/remote-video.component';\n\nexport * from './lib/enums/identity.enum';\n\n/** 錄音錄影 */\nexport * from './lib/record/record.service';\n\n/** 螢幕截圖 */\nexport * from './lib/screenshot-preview/screenshot-preview.component';\nexport * from './lib/screenshot-preview/screenshot.service';\n","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { ROUTING_PATH } from './shared/consts/routing-path.const';\n\nconst routes: Routes = [\n  {\n    path: '',\n    redirectTo: ROUTING_PATH.VIDEO,\n    pathMatch: 'full'\n  },\n  {\n    path: ROUTING_PATH.VIDEO,\n    loadChildren: () => import('./video/video.module').then(m => m.VideoModule)\n  },\n  {\n    path: '**',\n    redirectTo: ROUTING_PATH.VIDEO,\n    pathMatch: 'full'\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forRoot(routes)],\n  exports: [RouterModule]\n})\nexport class AppRoutingModule { }\n","import { Injectable } from '@angular/core';\nimport {\n  HttpErrorResponse,\n  HttpResponse,\n  HttpRequest,\n  HttpHandler,\n  HttpEvent,\n  HttpInterceptor\n} from '@angular/common/http';\nimport { Observable } from 'rxjs';\nimport { LoadingService } from './loading.service';\n\n@Injectable()\nexport class LoaderInterceptor implements HttpInterceptor {\n  private requests: HttpRequest<any>[] = [];\n  private whiteList: any[] = [];\n\n  constructor(private loadingService: LoadingService) { }\n\n  isInWhiteList(url: any) {\n    let result = false;\n\n    if (url) {\n      for (const i of this.whiteList) {\n        const whiteUrl = i;\n        if (url.includes(whiteUrl)) {\n          result = true;\n          break;\n        }\n      }\n    }\n\n    return result;\n  }\n  // checkAndTagLogout(event){\n  //   if(event && event.body && -6 == event.body.code){\n  //     this.loaderService.isSplashLogout = true;\n  //   }\n  // }\n\n  removeRequest(req: HttpRequest<any>) {\n    if (this.isInWhiteList(req.url)) {\n\n    } else {\n      const i = this.requests.indexOf(req);\n      if (i >= 0) {\n        this.requests.splice(i, 1);\n\n      }\n\n      if (this.requests.length === 0) {\n        this.loadingService.loading(false);\n      }\n    }\n  }\n\n  intercept(req: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\n    if (this.isInWhiteList(req.url)) {\n\n    } else {\n      if (this.requests.length === 0) {\n        this.loadingService.loading(true);\n      }\n      this.requests.push(req);\n    }\n\n    return new Observable(observer => {\n      const subscription = next.handle(req)\n        .subscribe(\n          event => {\n            if (event instanceof HttpResponse) {\n              this.removeRequest(req);\n              observer.next(event);\n            }\n          },\n          err => { this.removeRequest(req); observer.error(err); },\n          () => { this.removeRequest(req); observer.complete(); });\n      // teardown logic in case of cancelled requests\n      return () => {\n        this.removeRequest(req);\n        subscription.unsubscribe();\n      };\n    });\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Identity } from './enums/identity.enum';\nimport * as SockJS from 'sockjs-client';\nimport { LoadingService } from './ui-components/loading/loading.service';\nimport { MessageService } from './ui-components/message/message.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class WebrtcLibService {\n\n  /* url prarm */\n  private myParam = location.search.split('room=')[1];\n\n  /** WebSocket */\n  private wsc: WebSocket;\n\n  /* 本地流 */\n  localstream: MediaStream | null;\n  remotestream: MediaStream;\n\n  /* RTCPeerConnection */\n  private pc: RTCPeerConnection | null;\n\n  /* iceServer */\n  private iceServer = {\n    iceServers: [{\n      'urls': 'stun:192.168.0.48:3478' // Google's public STUN server\n    }]\n  };\n\n  /* 本地/遠端視訊 element */\n  localVideoEl: HTMLVideoElement;\n  remoteVideoEl: HTMLVideoElement;\n\n  /** 連線狀態 */\n  onlineStatus = {\n    CT: false,\n    CS: false\n  };\n\n  /**\n   * 取得身分別（業務員 or 客戶）\n   */\n  get identity(): Identity | undefined {\n    if (this.myParam.indexOf('@') > -1) { // Agent\n      return Identity.Agent;\n    } else if (this.myParam.indexOf('$') > -1) { // Customer\n      return Identity.Customer;\n    }\n    return;\n  }\n\n  /** 是否點選開始 */\n  isStarted = false;\n\n  constructor(\n    private loadingService: LoadingService,\n    private messageService: MessageService\n  ) { }\n\n  public startClick(): void {\n    this.loadingService.loading(true);\n    this.isStarted = true;\n    this.createWebSocketConnection();\n    this.createPeerConnection();\n  }\n\n  public stopClick(): void {\n    this.isStarted = false;\n\n    if (this.identity === Identity.Agent) { // Agent\n      this.onlineStatus.CS = false;\n    } else if (this.identity === Identity.Customer) { // Customer\n      this.onlineStatus.CT = false;\n    }\n\n    this.localVideoEl.setAttribute('src', '');\n    this.remoteVideoEl.setAttribute('src', '');\n\n    this.closeWebSocketConnection();\n    this.closePeerConnection();\n  }\n\n  /**\n   * 建立 web socket 連線\n   * 因一連線就會上線，所以在點選開始之後再建立連線\n   */\n  private createWebSocketConnection(): void {\n    if ('WebSocket' in window) {\n      this.wsc = new SockJS('https://lab.easontech.com.tw:8443/rtc/rtc/' + this.myParam);\n      this.wsc.onopen = (event) => {\n        console.log('WebSocket connected to server');\n      };\n\n      this.wsc.onmessage = (event) => {\n        try {\n          const message = JSON.parse(event.data);\n          console.log(message);\n          if (!this.pc) { return; }\n\n          if (message.State && message.State.indexOf('Online') > -1) {\n            console.log('State::' + event.data);\n\n            if (message.Serno.indexOf('@') > -1) {\t// Agent\n              // document.getElementById('wait-view').innerText = '等待客戶上線中...';\n\n              if (message.State.indexOf('CT') > -1) {\n                if (!this.onlineStatus.CT) {\n                  this.onlineStatus.CT = true;\n                  this.loadingService.loading(false);\n                  this.messageService.showMsg('success', '連線成功！');\n                }\n                this.startWebRTC();\n              }\n              else {\n                // 取得攝影機、麥克風權限\n                this.createMedia();\n                if (window.innerWidth > 768) {\n                  // checkList.classList.remove('hidden');\n                }\n                if (!this.onlineStatus.CS) {\n                  this.onlineStatus.CS = true;\n                  this.loadingService.loading(false);\n                  this.messageService.showMsg('success', '連線成功！');\n                }\n              }\n            } else if (message.Serno.indexOf('$') > -1) { // Customer\n              // document.getElementById('wait-view').innerText = '等待客服人員上線中...';\n\n              if (message.State.indexOf('CS') > -1) {\n                if (!this.onlineStatus.CS) {\n                  this.onlineStatus.CS = true;\n                  this.loadingService.loading(false);\n                  this.messageService.showMsg('success', '連線成功！');\n                }\n                this.startWebRTC();\n              }\n              else {\n                // 取得攝影機、麥克風權限\n                this.createMedia();\n                if (!this.onlineStatus.CT) {\n                  this.onlineStatus.CT = true;\n                  this.loadingService.loading(false);\n                  this.messageService.showMsg('success', '連線成功！');\n                }\n              }\n            }\n          } else if (message.State && message.State.indexOf('CT Offline') > -1) {\n            // 客戶離線\n            // pauseRecorder();\n            this.onlineStatus.CT = false;\n            this.remoteVideoEl.setAttribute('src', '');\n\n            // alert('客戶已離線');\n          } else if (message.State && message.State.indexOf('CS Offline') > -1) {\n            // 客服人員離線\n            this.onlineStatus.CS = false;\n            this.remoteVideoEl.setAttribute('src', '');\n\n          } else if (message.sdp) {\n            console.log('Sdp::' + event.data);\n            this.pc.setRemoteDescription(new RTCSessionDescription(message.sdp))\n              .then(() => {\n                if (this.pc?.remoteDescription?.type === 'offer') {\n                  this.pc.createAnswer()\n                    .then((e) => this.localDescCreated(e))\n                    .catch(this.logError);\n                }\n              })\n              .catch(this.logError);\n\n            // this.pc.setRemoteDescription(new RTCSessionDescription(message.sdp), () => {\n            //   if (this.pc.remoteDescription.type === 'offer') {\n            //     this.pc.createAnswer(localDescCreated, this.logError);\n            //   }\n            // }, this.logError);\n\n          } else if (message.candidate) {\n            console.log('Candidate::' + event.data);\n            this.pc.addIceCandidate(new RTCIceCandidate(message.candidate));\n          } else if (message.customMsg) {\n            console.log(message.customMsg);\n            // showFile2Sign();\n          }\n        }\n        catch (e) {\n          console.log(e);\n        }\n      };\n\n      this.wsc.onclose = (event) => {\n        console.log(event);\n        // reason: 'Cannot connect to server'\n        if (event && event.code === 1002) {\n          this.loadingService.loading(false);\n          this.messageService.showMsg('alert', '無法連線伺服器，請稍後再試！');\n          this.stopClick();\n        }\n      };\n    }\n  }\n\n  /**\n   * 結束 web socket 連線\n   */\n  private closeWebSocketConnection(): void {\n    console.log('close web socket');\n    this.wsc.close();\n  }\n\n  /**\n   * 初始化影像/聲音\n   */\n  private async createMedia(): Promise<void> {\n    // 儲存本地流到全域\n    this.localstream = await navigator.mediaDevices.getUserMedia({ audio: true, video: true });\n    if (!this.localVideoEl.srcObject && this.localstream) {\n      this.localVideoEl.srcObject = this.localstream;\n      console.log('本地端視訊！');\n\n      if (this.onlineStatus.CT && this.onlineStatus.CS) {\n        // document.getElementById('rec-img').setAttribute('src', './assets/image/rec.svg');\n        // document.getElementById('screenshot-img').setAttribute('src', './assets/image/screenshot.svg');\n      }\n    }\n    this.addLocalstream();\n  }\n\n  /**\n   * 增加本地流\n   */\n  private addLocalstream(): void {\n    this.localstream?.getTracks().forEach(track => this.pc?.addTrack(track, this.localstream!!));\n  }\n\n  /**\n   * 呼叫 startWebRTC() 開始建立連線\n   * @returns\n   */\n  private async startWebRTC(): Promise<void> {\n    if (!this.pc) { return; }\n\n    console.log(this.pc);\n    this.pc.onicecandidate = (event) => {\n      console.log(event);\n\n      if (event.candidate) {\n        // send the candidate to remote peer\n        this.wsc.send(JSON.stringify({ 'candidate': event.candidate }));\n      }\n    };\n\n    this.pc.oniceconnectionstatechange = (event: any) => {\n      console.log(event);\n\n      console.log('ICE 伺服器狀態變更 => ', event.target.iceConnectionState);\n    };\n\n    // let the 'negotiationneeded' event trigger offer generation\n    this.pc.onnegotiationneeded = () => {\n      if (!this.pc) { return; }\n      console.log('onnegotiationneeded');\n\n      this.pc.createOffer()\n        .then(e => this.localDescCreated(e))\n        .catch(this.logError);\n    };\n\n    // once remote stream arrives, show it in the remote video element\n    this.pc.ontrack = (event) => {\n      console.log('remote: ', event);\n      if (!this.remoteVideoEl.srcObject && event.streams) {\n        this.remoteVideoEl.srcObject = event.streams[0];\n        this.remotestream = event.streams[0];\n        console.log('接收流並顯示於遠端視訊！', event);\n      }\n    };\n  }\n\n  /**\n   * 建立 P2P 連接\n   */\n  private createPeerConnection(): void {\n    if (this.pc) {\n      this.pc.close();\n      this.pc = null;\n    }\n    this.pc = new RTCPeerConnection(this.iceServer);\n    console.log(this.pc);\n  }\n\n  /**\n   * 關閉 P2P 連接\n   */\n  private closePeerConnection(): void {\n    // 暫停video播放，並將儲存在src裡的 MediaStreamTracks 依序停止\n    if (this.localVideoEl.srcObject) {\n      this.localVideoEl.pause();\n      (this.localVideoEl.srcObject as MediaStream).getTracks().forEach((track: any) => {\n        track.stop();\n      });\n    }\n\n    if (this.pc) {\n      this.pc.close();\n      this.pc = null;\n      this.localstream = null;\n    }\n  }\n\n  private localDescCreated(desc: any) {\n    if (!this.pc) { return; }\n    this.pc.setLocalDescription(desc)\n      .then(() => {\n        this.wsc.send(JSON.stringify({ 'sdp': this.pc?.localDescription }));\n      })\n      .catch(this.logError);\n  }\n\n  private logError(error: any): void {\n    console.log(error.name + ': ' + error.message);\n  }\n}\n","export const ROUTING_PATH = {\n    /** 視訊 */\n    VIDEO: 'video'\n};\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { AfterViewInit, Component, ElementRef, OnInit, ViewChild } from '@angular/core';\nimport { MessageService } from './message.service';\n\n@Component({\n  selector: 'lib-message',\n  templateUrl: './message.component.html',\n  styleUrls: ['./message.component.scss']\n})\nexport class MessageComponent implements OnInit, AfterViewInit {\n\n  /* 成功訊息 element */\n  @ViewChild('alertSuccess') private alertSuccess: ElementRef;\n  /* 失敗訊息 element */\n  @ViewChild('alertDanger') private alertDanger: ElementRef;\n\n  constructor(\n    private messageService: MessageService\n  ) { }\n\n  ngOnInit(): void {\n  }\n\n  ngAfterViewInit(): void {\n    this.messageService.successMsg = this.alertSuccess.nativeElement;\n    this.messageService.alertMsg = this.alertDanger.nativeElement;\n  }\n\n}\n","<svg xmlns=\"http://www.w3.org/2000/svg\" style=\"display: none;\">\n    <symbol id=\"check-circle-fill\" fill=\"currentColor\" viewBox=\"0 0 16 16\">\n        <path\n            d=\"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z\" />\n    </symbol>\n    <symbol id=\"info-fill\" fill=\"currentColor\" viewBox=\"0 0 16 16\">\n        <path\n            d=\"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z\" />\n    </symbol>\n    <symbol id=\"exclamation-triangle-fill\" fill=\"currentColor\" viewBox=\"0 0 16 16\">\n        <path\n            d=\"M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z\" />\n    </symbol>\n</svg>\n<!-- success -->\n<div #alertSuccess class=\"alert alert-success d-flex align-items-center\" role=\"alert\">\n    <svg class=\"bi flex-shrink-0 me-2\" width=\"24\" height=\"24\" role=\"img\" aria-label=\"Success:\">\n        <use xlink:href=\"#check-circle-fill\" />\n    </svg>\n    <div class=\"success-msg\">\n        An example success alert with an icon\n    </div>\n</div>\n<!-- alert -->\n<div #alertDanger class=\"alert alert-danger d-flex align-items-center\" role=\"alert\">\n    <svg class=\"bi flex-shrink-0 me-2\" width=\"24\" height=\"24\" role=\"img\" aria-label=\"Danger:\">\n        <use xlink:href=\"#exclamation-triangle-fill\" />\n    </svg>\n    <div class=\"alert-msg\">\n        An example danger alert with an icon\n    </div>\n</div>","import { AfterViewInit, Component, ElementRef, OnInit, ViewChild } from '@angular/core';\nimport { ScreenshotService } from './screenshot.service';\n\n@Component({\n  selector: 'lib-screenshot-preview',\n  templateUrl: './screenshot-preview.component.html',\n  styleUrls: ['./screenshot-preview.component.scss']\n})\nexport class ScreenshotPreviewComponent implements OnInit, AfterViewInit {\n\n  /* 截圖畫面 element */\n  @ViewChild('screenshotPreview') private screenshotPreview: ElementRef;\n\n  constructor(\n    private screenshotService: ScreenshotService\n  ) { }\n\n  ngOnInit(): void {\n  }\n\n  ngAfterViewInit(): void {\n    this.screenshotService.screenshotPreviewEl = this.screenshotPreview.nativeElement;\n  }\n}\n","<img src=\"\" #screenshotPreview class=\"screenshot-preview\" alt=\"\">","import { Component, OnInit } from \"@angular/core\";\nimport { WebrtcLibService } from \"projects/webrtc-lib/src/public-api\";\n\n@Component({\n  selector: \"app-layout\",\n  templateUrl: \"./layout.component.html\",\n  styleUrls: [\"./layout.component.scss\"]\n})\nexport class LayoutComponent implements OnInit {\n\n  constructor(\n    public webrtcLibService: WebrtcLibService\n  ) { }\n\n  ngOnInit(): void { }\n}\n","<div class=\"header\">\n  <img src=\"./assets/images/logo/logo.jpg\" height=\"40px\" width=\"200px\" style=\"margin-bottom: 10px\" alt=\"\" />\n  <h3 class=\"video-title\">視訊服務</h3>\n  <div class=\"status ms-auto\">\n    <span class=\"me-4\">客戶：{{ webrtcLibService.onlineStatus.CT ? '已上線' : '未上線' }}</span>\n    <span>客服人員：{{ webrtcLibService.onlineStatus.CS ? '已上線' : '未上線' }}</span>\n  </div>\n</div>\n<div class=\"gradient-bar\"></div>\n<div class=\"content-container\">\n  <router-outlet #outletInfo=\"outlet\"></router-outlet>\n</div>","import { Component, OnInit } from '@angular/core';\nimport { Identity } from './enums/identity.enum';\n\n@Component({\n  selector: 'lib-webrtc-lib',\n  template: `\n    <p>\n      webrtc-lib works!\n    </p>\n  `,\n  styles: [\n  ]\n})\nexport class WebrtcLibComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","import { AfterViewInit, Component, ElementRef, OnInit, ViewChild } from '@angular/core';\nimport { WebrtcLibService } from '../../webrtc-lib.service';\n\n@Component({\n  selector: 'lib-remote-video',\n  templateUrl: './remote-video.component.html',\n  styleUrls: ['./remote-video.component.scss']\n})\nexport class RemoteVideoComponent implements OnInit, AfterViewInit {\n\n  /* 遠端視訊 element */\n  @ViewChild('remoteVideo') private remoteVideo: ElementRef;\n\n  constructor(\n    private webrtcLibService: WebrtcLibService\n  ) { }\n\n  ngOnInit(): void {\n  }\n\n  ngAfterViewInit(): void {\n    this.webrtcLibService.remoteVideoEl = this.remoteVideo.nativeElement;\n\n  }\n}\n","<video #remoteVideo autoplay playsinline></video>","import { NgModule } from '@angular/core';\nimport { WebrtcLibComponent } from './webrtc-lib.component';\nimport { LocalVideoComponent } from './components/local-video/local-video.component';\nimport { RemoteVideoComponent } from './components/remote-video/remote-video.component';\nimport { ScreenshotPreviewComponent } from './screenshot-preview/screenshot-preview.component';\nimport { LoadingComponent } from './ui-components/loading/loading.component';\nimport { LoaderInterceptor } from './ui-components/loading/loader.interceptor';\nimport { CommonModule } from '@angular/common';\nimport { MessageComponent } from './ui-components/message/message.component';\n\n\n\n@NgModule({\n  declarations: [\n    WebrtcLibComponent,\n    LocalVideoComponent,\n    RemoteVideoComponent,\n    ScreenshotPreviewComponent,\n    LoadingComponent,\n    MessageComponent\n  ],\n  imports: [\n    CommonModule\n  ],\n  exports: [\n    WebrtcLibComponent,\n    LocalVideoComponent,\n    RemoteVideoComponent,\n    ScreenshotPreviewComponent,\n    LoadingComponent,\n    MessageComponent\n  ],\n  providers: [\n    LoaderInterceptor\n  ]\n})\nexport class WebrtcLibModule { }\n","import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class MessageService {\n\n  /* success element */\n  successMsg: HTMLElement;\n  /* alert element */\n  alertMsg: HTMLElement;\n\n  constructor() { }\n\n  showMsg(type: string, text: string): void {\n    switch (type) {\n      case 'success':\n        this.successMsg.classList.add('show');\n        (this.successMsg.querySelector('.success-msg') as HTMLElement).innerText = text;\n        setTimeout(() => {\n          this.successMsg.classList.remove('show');\n        }, 5000);\n        break;\n      case 'alert':\n        this.alertMsg.classList.add('show');\n        (this.alertMsg.querySelector('.alert-msg') as HTMLElement).innerText = text;\n\n        setTimeout(() => {\n          this.alertMsg.classList.remove('show');\n        }, 5000);\n        break;\n      default:\n        break;\n    }\n  }\n}\n","import { Injectable, NgZone } from '@angular/core';\nimport { Observable, fromEvent, Subject } from 'rxjs';\nimport { RecorderState } from '../enums/recorder-state.enum';\nimport { WebrtcLibService } from '../webrtc-lib.service';\ndeclare var MediaRecorder: any;\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RecordService {\n\n  /* 本地端 mediaRecorder 物件 */\n  localRecorder: any;\n  /* 遠端 mediaRecorder 物件 */\n  remoteRecorder: any;\n\n  /** 本地/遠端錄音錄影的 files */\n  private fileListSubject = new Subject<File[]>();\n  private fileList: File[] = [];\n  getFileList(): Observable<File[]> {\n    return this.fileListSubject.asObservable();\n  }\n\n  /**\n   * 取得錄音錄影狀態\n   * - 返回 null 代表發生問題\n   */\n  get recorderState(): RecorderState | undefined {\n    const localR = this.localRecorder;\n    const remoteR = this.remoteRecorder;\n    if (!localR || !remoteR) { return; }\n    if (localR.state === remoteR.state) {\n      return localR.state;\n    }\n    throw new Error('發生問題，本地/遠端錄影應同步狀態');\n  }\n\n  constructor(\n    private webrtcLibService: WebrtcLibService\n  ) { }\n\n  /**\n   * 啟動錄音錄影\n   */\n  public startRecorder(): void {\n    /* 建立本地端 mediaRecorder 物件 */\n    if (!this.webrtcLibService.localstream) { return; }\n    this.localRecorder = new MediaRecorder(new MediaStream(this.webrtcLibService.localstream));\n    this.localRecorder.start();\n    // 訂閱 MediaRecorder，在結束錄影後回傳檔案\n    this.localRecorder.ondataavailable = (event: any) => {\n      console.log(event);\n      if (event.data && event.data.size > 0) {\n        // const recordVideo = new Blob([event.data], { 'type': 'video' });\n        const file = new File([event.data], 'local_video.mp4');\n        this.fileList.push(file);\n        if (this.fileList.length < 2) { return; }\n        // 集滿檔案才放入 Subject\n        this.fileListSubject.next(this.fileList);\n      }\n    };\n\n    /* 建立遠端 mediaRecorder 物件 */\n    this.remoteRecorder = new MediaRecorder(new MediaStream(this.webrtcLibService.remotestream));\n    this.remoteRecorder.start();\n    // 訂閱 MediaRecorder，在結束錄影後回傳檔案\n    this.remoteRecorder.ondataavailable = (event: any) => {\n      console.log(event);\n      if (event.data && event.data.size > 0) {\n        // const recordVideo = new Blob([event.data], { 'type': 'video' });\n        const file = new File([event.data], 'remote_video.mp4');\n        this.fileList.push(file);\n        if (this.fileList.length < 2) { return; }\n        // 集滿檔案才放入 Subject\n        this.fileListSubject.next(this.fileList);\n      }\n    };\n  }\n\n  /**\n   * 結束錄音錄影\n   */\n  public stopRecorder(): void {\n    if (this.localRecorder) {\n      this.localRecorder.stop();\n    }\n    if (this.remoteRecorder) {\n      this.remoteRecorder.stop();\n    }\n  }\n\n  /**\n   * 暫停錄音錄影\n   */\n  private pauseRecorder(): void {\n    console.log('客戶離線因此暫停錄影');\n\n    if (this.localRecorder) {\n      this.localRecorder.pause();\n    }\n    if (this.remoteRecorder) {\n      this.remoteRecorder.pause();\n    }\n  }\n}\n","<div class=\"loading-mask\" *ngIf=\"showLoading\">\n    <div class=\"loading-zone\">\n        <div class=\"loading-bar\"></div>\n        <div class=\"loading-bar\"></div>\n        <div class=\"loading-bar\"></div>\n        <div class=\"loading-bar\"></div>\n    </div>\n</div>","import { Component, OnInit } from '@angular/core';\nimport { LoadingService } from './loading.service';\n\n@Component({\n  selector: 'merc-loading',\n  templateUrl: './loading.component.html',\n  styleUrls: ['./loading.component.scss']\n})\nexport class LoadingComponent implements OnInit {\n\n  public showLoading = false;\n\n  constructor(\n    private loadingService: LoadingService\n  ) { }\n\n  ngOnInit() {\n    this.loadingService.getLoading().subscribe(loading => {\n      setTimeout(() => { this.showLoading = loading; });\n    });\n  }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { WebrtcLibService } from 'projects/webrtc-lib/src/public-api';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.scss']\n})\nexport class AppComponent {\n  title = 'nanshan-webrtc';\n}\n","<merc-loading></merc-loading>\n<lib-message></lib-message>\n<app-layout></app-layout>","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"zn8P\";"],"sourceRoot":"webpack:///"}